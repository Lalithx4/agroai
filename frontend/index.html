<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1a5c1e">
    <meta name="description" content="CropMagix - AI-powered agricultural assistant">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <title>üå± CropMagix - AI Farming</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <!-- Splash Screen - Hidden -->
    <div id="splash-screen" class="splash-screen hidden" style="display: none !important;">
        <div class="splash-content">
            <div class="splash-logo">üå±</div>
            <h1>CropMagix</h1>
            <p>AI-Powered Farming</p>
            <div class="splash-loader"></div>
        </div>
    </div>

    <!-- Header -->
    <header class="app-header">
        <div class="logo" onclick="navigateTo('home')">
            <span class="logo-icon">üå±</span>
            <span class="logo-text">CropMagix</span>
        </div>
        <div class="header-right">
            <div class="language-selector">
                <button class="lang-btn active" data-lang="en">EN</button>
                <button class="lang-btn" data-lang="hi">‡§π‡§ø</button>
                <button class="lang-btn" data-lang="te">‡∞§‡±Ü</button>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="app-main">
        <!-- Home Screen -->
        <section id="home-screen" class="screen active">
            <div class="hero-card">
                <div class="hero-bg"></div>
                <div class="hero-content">
                    <div class="hero-avatar">üë®‚Äçüåæ</div>
                    <h1 data-i18n="welcome">Welcome, Farmer!</h1>
                    <p data-i18n="welcomeDesc">AI-powered crop health assistant</p>
                </div>
            </div>
            
            <div class="stats-row">
                <div class="stat-card">
                    <span class="stat-num" id="total-scans">0</span>
                    <span class="stat-label">Scans</span>
                </div>
                <div class="stat-card success">
                    <span class="stat-num" id="healthy-count">0</span>
                    <span class="stat-label">Healthy</span>
                </div>
                <div class="stat-card warning">
                    <span class="stat-num" id="issues-count">0</span>
                    <span class="stat-label">Issues</span>
                </div>
            </div>
            
            <div class="feature-grid">
                <button class="feature-card ar-feature" onclick="navigateTo('scanner')">
                    <div class="feature-badge">AR</div>
                    <div class="feature-icon">üì∑</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="scanPlant">AR Scanner</span>
                        <span class="feature-desc">Real-time detection</span>
                    </div>
                </button>
                
                <button class="feature-card" onclick="navigateTo('chat')">
                    <div class="feature-icon">üí¨</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="talkToPlant">Plant Chat</span>
                        <span class="feature-desc">Talk to your plant</span>
                    </div>
                </button>
                
                <button class="feature-card" onclick="navigateTo('weather')">
                    <div class="feature-icon">üå§Ô∏è</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="weather">Weather</span>
                        <span class="feature-desc">Farm forecast</span>
                    </div>
                </button>
                
                <button class="feature-card" onclick="navigateTo('calendar')">
                    <div class="feature-badge new">NEW</div>
                    <div class="feature-icon">üìÖ</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="cropCalendar">Crop Calendar</span>
                        <span class="feature-desc">Reminders & Tasks</span>
                    </div>
                </button>
                
                <button class="feature-card" onclick="navigateTo('medicine')">
                    <div class="feature-badge new">NEW</div>
                    <div class="feature-icon">üíä</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="medicine">Medicine Guide</span>
                        <span class="feature-desc">Pesticide recommendations</span>
                    </div>
                </button>
                
                <button class="feature-card" onclick="navigateTo('pest')">
                    <div class="feature-badge new">NEW</div>
                    <div class="feature-icon">üêõ</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="pestTracker">Pest Alerts</span>
                        <span class="feature-desc">Regional pest tracking</span>
                    </div>
                </button>
                
                <button class="feature-card" onclick="navigateTo('history')">
                    <div class="feature-icon">üìä</div>
                    <div class="feature-text">
                        <span class="feature-title" data-i18n="history">History</span>
                        <span class="feature-desc">Past scans</span>
                    </div>
                </button>
            </div>
            
            <!-- Offline Status Banner -->
            <div id="offline-banner" class="offline-banner hidden">
                <span class="offline-icon">üì°</span>
                <span data-i18n="offlineMode">Offline Mode Active</span>
                <span class="pending-sync" id="pending-count"></span>
            </div>
            
            <button class="reset-btn" onclick="resetAllData()">
                üîÑ <span data-i18n="resetData">Reset All Data</span>
            </button>
        </section>

        <!-- AR Scanner Screen -->
        <section id="scanner-screen" class="screen">
            <div class="scanner-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <h2 data-i18n="arScanner">AR Plant Scanner</h2>
                <button class="ar-toggle" id="ar-toggle" onclick="toggleARMode()">
                    <span id="ar-toggle-icon">üéØ</span>
                </button>
            </div>
            
            <div class="ar-container">
                <div class="camera-view">
                    <video id="camera-video" autoplay playsinline muted></video>
                    <canvas id="ar-canvas"></canvas>
                    
                    <!-- AR Overlay Elements -->
                    <div class="ar-overlay">
                        <div class="ar-frame">
                            <div class="corner tl"></div>
                            <div class="corner tr"></div>
                            <div class="corner bl"></div>
                            <div class="corner br"></div>
                        </div>
                        <div class="scan-line"></div>
                    </div>
                    
                    <!-- AR Detection Markers -->
                    <div id="ar-markers"></div>
                    
                    <!-- AR HUD -->
                    <div class="ar-hud">
                        <div class="hud-item">
                            <span class="hud-icon">üì°</span>
                            <span class="hud-text" id="ar-status">Ready</span>
                        </div>
                        <div class="hud-item" id="ar-fps-display">
                            <span class="hud-icon">üéØ</span>
                            <span class="hud-text" id="ar-fps">-- FPS</span>
                        </div>
                    </div>
                    
                    <!-- Detection Tooltip -->
                    <div id="ar-tooltip" class="ar-tooltip hidden">
                        <div class="tooltip-header">
                            <span class="tooltip-icon">üåø</span>
                            <span class="tooltip-title" id="tooltip-title">Detected</span>
                        </div>
                        <div class="tooltip-body" id="tooltip-body"></div>
                    </div>
                </div>
                
                <div class="scanner-controls">
                    <button class="ctrl-btn" onclick="document.getElementById('file-input').click()">
                        <span>üìÅ</span>
                        <span>Gallery</span>
                    </button>
                    
                    <button class="capture-btn" id="capture-btn" onclick="captureImage()">
                        <div class="capture-ring"></div>
                        <span>üì∏</span>
                    </button>
                    
                    <button class="ctrl-btn" id="flash-btn" onclick="toggleFlash()">
                        <span id="flash-icon">‚ö°</span>
                        <span>Flash</span>
                    </button>
                </div>
                
                <input type="file" id="file-input" accept="image/*" hidden>
            </div>
            
            <!-- Analysis Result Panel -->
            <div id="analysis-result" class="result-panel hidden">
                <div class="result-header">
                    <button class="close-btn" onclick="hideAnalysisResult()">√ó</button>
                    <h3 data-i18n="analysisResult">Analysis Result</h3>
                </div>
                
                <div class="result-content">
                    <div class="result-image-wrap">
                        <img id="result-image" src="" alt="Analyzed plant">
                        <div class="result-badges" id="result-badges"></div>
                    </div>
                    
                    <div class="health-indicator" id="health-indicator">
                        <div class="health-icon" id="health-icon">üåø</div>
                        <div class="health-info">
                            <span class="health-status" id="health-text">Analyzing...</span>
                            <span class="plant-type" id="plant-type">-</span>
                        </div>
                        <div class="confidence-ring">
                            <svg viewBox="0 0 36 36">
                                <circle class="ring-bg" cx="18" cy="18" r="16"/>
                                <circle class="ring-fill" id="confidence-ring" cx="18" cy="18" r="16"/>
                            </svg>
                            <span class="confidence-num" id="confidence-num">--%</span>
                        </div>
                    </div>
                    
                    <div class="result-tabs">
                        <button class="tab active" data-tab="diseases">ü¶† Issues</button>
                        <button class="tab" data-tab="tips">üí° Tips</button>
                    </div>
                    
                    <div class="tab-panel active" id="diseases-panel">
                        <div id="diseases-list"></div>
                    </div>
                    
                    <div class="tab-panel" id="tips-panel">
                        <div id="recommendations"></div>
                    </div>
                    
                    <div class="result-actions">
                        <button class="action-btn chat" onclick="navigateToChat()">
                            üí¨ Ask Plant
                        </button>
                        <button class="action-btn future" onclick="showTimeTravelSlider()">
                            üîÆ Time Travel
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Time Travel Modal -->
            <div id="time-travel-modal" class="modal hidden">
                <div class="modal-overlay" onclick="hideTimeTravelSlider()"></div>
                <div class="modal-box">
                    <button class="modal-close" onclick="hideTimeTravelSlider()">√ó</button>
                    <h3>üîÆ Future Prediction</h3>
                    
                    <div class="time-travel-view">
                        <div class="image-compare">
                            <img id="current-image" src="" alt="Current">
                            <img id="future-image" src="" alt="Future">
                            <div class="compare-slider" id="compare-slider">
                                <div class="slider-handle"></div>
                            </div>
                        </div>
                        
                        <div class="time-slider">
                            <input type="range" id="future-slider" min="0" max="100" value="0">
                            <div class="time-labels">
                                <span>Now</span>
                                <span>7 days</span>
                                <span>14 days</span>
                            </div>
                        </div>
                        
                        <div class="scenario-btns">
                            <button class="scenario-btn bad active" data-scenario="untreated">
                                ‚ö†Ô∏è Untreated
                            </button>
                            <button class="scenario-btn good" data-scenario="treated">
                                üíä Treated
                            </button>
                        </div>
                        
                        <div class="prediction-text" id="future-description">
                            Select a scenario to see the prediction
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Chat Screen -->
        <section id="chat-screen" class="screen">
            <div class="chat-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <div class="chat-plant-info">
                    <span class="plant-emoji" id="chat-avatar">üå±</span>
                    <div class="plant-details">
                        <span class="plant-name" id="chat-plant-name">Your Plant</span>
                        <span class="plant-status" id="chat-plant-status">Ready to chat</span>
                    </div>
                </div>
                <button class="tts-btn" id="tts-btn" onclick="toggleTTS()">üîä</button>
            </div>
            
            <div class="chat-body" id="chat-container">
                <div class="chat-messages" id="chat-messages"></div>
                <div class="typing-indicator hidden" id="typing-indicator">
                    <span></span><span></span><span></span>
                </div>
            </div>
            
            <div class="quick-replies">
                <button onclick="sendQuickReply('How are you feeling?')">How are you? ü§î</button>
                <button onclick="sendQuickReply('What do you need?')">What do you need? üíß</button>
                <button onclick="sendQuickReply('Any tips?')">Tips? üí°</button>
            </div>
            
            <div class="chat-input-bar">
                <button class="mic-btn" onclick="startVoiceInput()">üé§</button>
                <input type="text" id="chat-input" placeholder="Type a message...">
                <button class="send-btn" onclick="sendChatMessage()">‚û§</button>
            </div>
        </section>

        <!-- Weather Screen -->
        <section id="weather-screen" class="screen">
            <div class="weather-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <h2 data-i18n="weatherForecast">Weather & Soil</h2>
                <button class="refresh-btn" onclick="refreshWeather()">üîÑ</button>
            </div>
            
            <div class="weather-content">
                <div class="weather-hero" id="weather-hero">
                    <div class="weather-icon-big" id="weather-icon">üå§Ô∏è</div>
                    <div class="weather-temp" id="weather-temp">--¬∞C</div>
                    <div class="weather-desc" id="weather-desc">Loading...</div>
                    <div class="weather-location">
                        üìç <span id="location-name">Detecting...</span>
                    </div>
                    <div class="weather-details">
                        <div class="detail">
                            <span class="detail-icon">üíß</span>
                            <span class="detail-value" id="humidity-val">--%</span>
                            <span class="detail-label">Humidity</span>
                        </div>
                        <div class="detail">
                            <span class="detail-icon">üí®</span>
                            <span class="detail-value" id="wind-val">--</span>
                            <span class="detail-label">Wind</span>
                        </div>
                        <div class="detail">
                            <span class="detail-icon">üå°Ô∏è</span>
                            <span class="detail-value" id="feels-val">--¬∞C</span>
                            <span class="detail-label">Feels</span>
                        </div>
                    </div>
                </div>
                
                <div class="farm-score-card">
                    <h4>üåæ Farming Score</h4>
                    <div class="score-display">
                        <div class="score-circle">
                            <svg viewBox="0 0 100 100">
                                <circle class="bg" cx="50" cy="50" r="45"/>
                                <circle class="fill" id="score-fill" cx="50" cy="50" r="45"/>
                            </svg>
                            <span class="score-num" id="farm-score">--</span>
                        </div>
                        <span class="score-label" id="score-label">Loading...</span>
                    </div>
                </div>
                
                <div class="forecast-section">
                    <h4>üìÖ 5-Day Forecast</h4>
                    <div class="forecast-list" id="forecast-list"></div>
                </div>
                
                <div class="alerts-card" id="alerts-card">
                    <h4>‚ö†Ô∏è Alerts</h4>
                    <div id="alerts-list"></div>
                </div>
                
                <div class="advice-card">
                    <h4>üí° Farming Tips</h4>
                    <div id="advice-list"></div>
                </div>
                
                <div class="soil-card">
                    <h4>üî¨ Soil Analysis</h4>
                    <p>Upload a soil photo for AI analysis</p>
                    <input type="file" id="soil-input" accept="image/*" hidden>
                    <button class="soil-btn" onclick="document.getElementById('soil-input').click()">
                        üì∑ Analyze Soil
                    </button>
                    <div id="soil-result" class="soil-result hidden"></div>
                </div>
            </div>
        </section>

        <!-- History Screen -->
        <section id="history-screen" class="screen">
            <div class="history-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <h2 data-i18n="scanHistory">Scan History</h2>
                <button class="clear-btn" onclick="clearHistory()">üóëÔ∏è</button>
            </div>
            
            <div class="history-list" id="history-container">
                <div class="empty-state" id="empty-history">
                    <span class="empty-icon">üìã</span>
                    <p data-i18n="noHistory">No scans yet</p>
                    <button class="start-btn" onclick="navigateTo('scanner')">
                        üì∑ Start Scanning
                    </button>
                </div>
            </div>
        </section>

        <!-- Crop Calendar Screen -->
        <section id="calendar-screen" class="screen">
            <div class="calendar-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <h2 data-i18n="cropCalendar">Crop Calendar</h2>
                <button class="add-btn" onclick="showAddCropModal()">‚ûï</button>
            </div>
            
            <div class="calendar-content">
                <!-- Active Crops -->
                <div class="crops-section">
                    <h4>üå± My Crops</h4>
                    <div class="crops-list" id="active-crops">
                        <div class="empty-crops">
                            <span>No crops added yet</span>
                            <button onclick="showAddCropModal()">‚ûï Add Crop</button>
                        </div>
                    </div>
                </div>
                
                <!-- Today's Tasks -->
                <div class="tasks-section">
                    <h4>üìã Today's Tasks</h4>
                    <div class="tasks-list" id="today-tasks">
                        <p class="no-tasks">No tasks for today</p>
                    </div>
                </div>
                
                <!-- Upcoming Reminders -->
                <div class="reminders-section">
                    <h4>üîî Upcoming Reminders</h4>
                    <div class="reminders-list" id="upcoming-reminders">
                        <p class="no-reminders">No upcoming reminders</p>
                    </div>
                </div>
                
                <!-- Calendar View -->
                <div class="mini-calendar">
                    <div class="calendar-nav">
                        <button onclick="prevMonth()">‚óÄ</button>
                        <span id="calendar-month">January 2025</span>
                        <button onclick="nextMonth()">‚ñ∂</button>
                    </div>
                    <div class="calendar-grid" id="calendar-grid"></div>
                </div>
            </div>
            
            <!-- Add Crop Modal -->
            <div id="add-crop-modal" class="modal hidden">
                <div class="modal-overlay" onclick="hideAddCropModal()"></div>
                <div class="modal-box">
                    <button class="modal-close" onclick="hideAddCropModal()">√ó</button>
                    <h3>üå± Add New Crop</h3>
                    
                    <div class="crop-form">
                        <div class="form-group">
                            <label>Crop Type</label>
                            <select id="crop-type">
                                <option value="tomato">üçÖ Tomato</option>
                                <option value="rice">üåæ Rice</option>
                                <option value="wheat">üåæ Wheat</option>
                                <option value="cotton">üåø Cotton</option>
                                <option value="chili">üå∂Ô∏è Chili</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Planting Date</label>
                            <input type="date" id="planting-date">
                        </div>
                        <div class="form-group">
                            <label>Field/Area Name</label>
                            <input type="text" id="field-name" placeholder="e.g., North Field">
                        </div>
                        <button class="submit-btn" onclick="addNewCrop()">
                            ‚ûï Add Crop
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Medicine Guide Screen -->
        <section id="medicine-screen" class="screen">
            <div class="medicine-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <h2 data-i18n="medicineGuide">Medicine Guide</h2>
                <button class="organic-toggle" id="organic-toggle" onclick="toggleOrganicPreference()">
                    <span id="organic-icon">üåø</span>
                </button>
            </div>
            
            <div class="medicine-content">
                <!-- Search -->
                <div class="medicine-search">
                    <input type="text" id="disease-search" placeholder="Search disease (e.g., early blight)...">
                    <button onclick="searchDisease()">üîç</button>
                </div>
                
                <!-- Quick Categories -->
                <div class="disease-categories">
                    <button class="cat-btn active" data-category="all">All</button>
                    <button class="cat-btn" data-category="fungal">üçÑ Fungal</button>
                    <button class="cat-btn" data-category="bacterial">ü¶† Bacterial</button>
                    <button class="cat-btn" data-category="viral">üß¨ Viral</button>
                    <button class="cat-btn" data-category="pest">üêõ Pest</button>
                </div>
                
                <!-- Common Diseases -->
                <div class="disease-list" id="disease-list">
                    <div class="disease-card" onclick="showTreatment('early blight')">
                        <span class="disease-icon">üçÇ</span>
                        <span class="disease-name">Early Blight</span>
                        <span class="disease-arrow">‚Üí</span>
                    </div>
                    <div class="disease-card" onclick="showTreatment('late blight')">
                        <span class="disease-icon">üå´Ô∏è</span>
                        <span class="disease-name">Late Blight</span>
                        <span class="disease-arrow">‚Üí</span>
                    </div>
                    <div class="disease-card" onclick="showTreatment('powdery mildew')">
                        <span class="disease-icon">üßä</span>
                        <span class="disease-name">Powdery Mildew</span>
                        <span class="disease-arrow">‚Üí</span>
                    </div>
                    <div class="disease-card" onclick="showTreatment('bacterial wilt')">
                        <span class="disease-icon">üíÄ</span>
                        <span class="disease-name">Bacterial Wilt</span>
                        <span class="disease-arrow">‚Üí</span>
                    </div>
                    <div class="disease-card" onclick="showTreatment('mosaic virus')">
                        <span class="disease-icon">üî≤</span>
                        <span class="disease-name">Mosaic Virus</span>
                        <span class="disease-arrow">‚Üí</span>
                    </div>
                    <div class="disease-card" onclick="showTreatment('spider mites')">
                        <span class="disease-icon">üï∑Ô∏è</span>
                        <span class="disease-name">Spider Mites</span>
                        <span class="disease-arrow">‚Üí</span>
                    </div>
                </div>
                
                <!-- Treatment Details Panel -->
                <div id="treatment-panel" class="treatment-panel hidden">
                    <button class="back-treatment" onclick="hideTreatmentPanel()">‚Üê Back</button>
                    <div id="treatment-content"></div>
                </div>
            </div>
        </section>

        <!-- Pest Tracking Screen -->
        <section id="pest-screen" class="screen">
            <div class="pest-header">
                <button class="back-btn" onclick="navigateTo('home')">‚Üê</button>
                <h2 data-i18n="pestTracker">Pest Tracker</h2>
                <button class="report-btn" onclick="showReportSighting()">üìç</button>
            </div>
            
            <div class="pest-content">
                <!-- Regional Alert Banner -->
                <div class="pest-alert-banner" id="pest-alert-banner">
                    <div class="alert-icon">‚ö†Ô∏è</div>
                    <div class="alert-info">
                        <span class="alert-title">Regional Alert</span>
                        <span class="alert-text" id="alert-text">Checking your region...</span>
                    </div>
                </div>
                
                <!-- Weather-Based Risks -->
                <div class="risk-section">
                    <h4>üå°Ô∏è Weather-Based Risk</h4>
                    <div class="risk-list" id="weather-risk-list">
                        <p class="loading-risk">Analyzing weather conditions...</p>
                    </div>
                </div>
                
                <!-- My Crop Pests -->
                <div class="crop-pest-section">
                    <h4>üåæ Pests for Your Crops</h4>
                    <div class="crop-selector">
                        <select id="pest-crop-select" onchange="loadPestsForCrop()">
                            <option value="">Select a crop</option>
                            <option value="rice">Rice</option>
                            <option value="cotton">Cotton</option>
                            <option value="tomato">Tomato</option>
                            <option value="chili">Chili</option>
                            <option value="maize">Maize</option>
                        </select>
                    </div>
                    <div class="pest-list" id="crop-pest-list"></div>
                </div>
                
                <!-- Pest Calendar -->
                <div class="pest-calendar-section">
                    <h4>üìÖ Seasonal Pest Calendar</h4>
                    <div class="season-tabs">
                        <button class="season-tab active" data-season="kharif">Kharif</button>
                        <button class="season-tab" data-season="rabi">Rabi</button>
                        <button class="season-tab" data-season="summer">Summer</button>
                    </div>
                    <div class="seasonal-pests" id="seasonal-pests"></div>
                </div>
                
                <!-- Recent Sightings -->
                <div class="sightings-section">
                    <h4>üëÅÔ∏è Recent Sightings</h4>
                    <div class="sightings-list" id="sightings-list">
                        <p class="no-sightings">No recent sightings in your area</p>
                    </div>
                </div>
            </div>
            
            <!-- Report Sighting Modal -->
            <div id="report-sighting-modal" class="modal hidden">
                <div class="modal-overlay" onclick="hideReportSighting()"></div>
                <div class="modal-box">
                    <button class="modal-close" onclick="hideReportSighting()">√ó</button>
                    <h3>üìç Report Pest Sighting</h3>
                    
                    <div class="sighting-form">
                        <div class="form-group">
                            <label>Pest Type</label>
                            <select id="sighting-pest">
                                <option value="fall_armyworm">Fall Armyworm</option>
                                <option value="whitefly">Whitefly</option>
                                <option value="pink_bollworm">Pink Bollworm</option>
                                <option value="brown_planthopper">Brown Planthopper</option>
                                <option value="aphids">Aphids</option>
                                <option value="thrips">Thrips</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="sighting-location" placeholder="Village/District name">
                        </div>
                        <div class="form-group">
                            <label>Notes</label>
                            <textarea id="sighting-notes" placeholder="Describe what you observed"></textarea>
                        </div>
                        <div class="form-group">
                            <label>Photo (optional)</label>
                            <input type="file" id="sighting-photo" accept="image/*">
                        </div>
                        <button class="submit-btn" onclick="submitSighting()">
                            üìç Submit Report
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Pest Detail Modal -->
            <div id="pest-detail-modal" class="modal hidden">
                <div class="modal-overlay" onclick="hidePestDetail()"></div>
                <div class="modal-box large">
                    <button class="modal-close" onclick="hidePestDetail()">√ó</button>
                    <div id="pest-detail-content"></div>
                </div>
            </div>
        </section>
    </main>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loader">
            <div class="leaf">üçÉ</div>
        </div>
        <p id="loading-text">Analyzing...</p>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <script src="js/i18n.js"></script>
    <script src="js/cache.js"></script>
    <script src="js/api.js"></script>
    <script src="js/tts.js"></script>
    <script src="js/offline.js"></script>
    <script src="js/calendar.js"></script>
    <script src="js/medicine.js"></script>
    <script src="js/pest.js"></script>
    <script src="js/ar.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Register Service Worker
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js')
                .then(reg => console.log('SW registered:', reg.scope))
                .catch(err => console.log('SW failed:', err));
        }
    </script>
</body>
</html>
